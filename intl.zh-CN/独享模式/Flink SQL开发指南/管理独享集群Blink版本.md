# 管理独享集群Blink版本

实时计算Flink版为独享模式集群提供版本管理功能，您可自行管理集群对应的Blink引擎版本。

## 安装版本

1.  登录版本管理页面。

    1.  登录[实时计算控制台](https://stream-ap-southeast-3.console.aliyun.com)。

    2.  将鼠标悬停至控制台页面右上角个人账户位置，单击**项目管理**。

    3.  在左侧导航栏，单击**集群管理** \> **集群列表**。

    4.  在**集群列表**区域，单击目标集群**操作**列下的**更多** \> **版本管理**。

2.  在**可安装版本**页面，单击目标版本**操作**列下的**安装**。

    您可以在**可安装版本**页签，根据业务需求和版本特性，安装适合的版本。

    |标签|说明|
    |--|--|
    |**stable**|当前推荐安装的稳定版本|
    |**beta**|测试版本 **说明：** 在特定场景下才可安装使用，非特定场景不保证版本质量和稳定性，不建议安装。 |
    |无标签|历史稳定版本|

    **说明：**

    -   一次只能安装一个版本，安装过程中集群状态显示为**版本部署中**。
    -   不可安装已安装过的版本。
    -   每个版本设有服役时间（默认一年），版本退役后您可以继续使用此版本，但阿里云不再负责维护。

## 切换版本

不同的Blink版本具备不同的特性，您可以根据实际需求，设置合适的Blink版本为当前版本。您可以通过**版本切换**功能，为单个作业变更Blink版本。

1.  登录[实时计算控制台](https://stream-ap-southeast-3.console.aliyun.com)。

2.  单击页面的顶部**开发**。

3.  在**作业开发**页面，双击目标文件夹下的目标作业，进入**作业开发**页面。

4.  在**作业开发**页面的右下角，单击版本信息。

5.  在选项列表中选择目标版本。


## 卸载版本

当前实时计算Flink版仅支持安装3个Blink版本，如果您已经安装3个Blink版本，且需要安装新版本，则您需要先卸载版本。

1.  登录版本管理页面。

    1.  登录[实时计算控制台](https://stream-ap-southeast-3.console.aliyun.com)。

    2.  将鼠标悬停至控制台页面右上角个人账户位置，单击**项目管理**。

    3.  在左侧导航栏，单击**集群管理** \> **集群列表**。

    4.  在**集群列表**区域，单击目标集群**操作**列下的**更多** \> **版本管理**。

2.  在**已安装版本**页面，单击目标版本**操作**列下的**卸载**。

    **说明：**

    -   不能卸载已设置为**current**的版本。
    -   不能卸载作业已引用的版本。

## 设置为当前版本

您可以选择一个已安装的Blink版本，将它设置为当前集群内作业的默认版本。不同的Blink版本具备不同的特性，您可以根据实际需求，将合适的Blink版本设置为当前版本。

1.  登录版本管理页面。

    1.  登录[实时计算控制台](https://stream-ap-southeast-3.console.aliyun.com)。

    2.  将鼠标悬停至控制台页面右上角个人账户位置，单击**项目管理**。

    3.  在左侧导航栏，单击**集群管理** \> **集群列表**。

    4.  在**集群列表**区域，单击目标集群**操作**列下的**更多** \> **版本管理**。

2.  在**已安装版本**页面，单击目标版本**操作**列下的**设置为current**。


## 常见问题

-   Q：安装引擎出现`blink-<version> already installed`报错信息。

    A：该版本已经安装，无需再次安装。

-   Q：安装引擎出现`Flink versions exceeded max limitation:3`报错信息。

    A：超出版本限制。若需安装新版本，需预先删除原有版本，使已安装版本数小于3。

-   Q：卸载引擎出现`Node:<nodeName> in project:<projectName> still ref the version:<blinkVersion>`报错信息。

    A：线上存在引用此版本引擎的作业，请根据报错信息中的作业名称和项目名称，将该作业先进行下线。

-   Q：单击**语法检查**或**上线**产生如下报错。

    ```
    code:[30006], brief info:[blink script not exist, please check blink version], context info:[blink script:[/home/admin/blink/blink-2.2.6-hotfix0/bin/flink], blink version:[/home/admin/blink/blink-2.2.6-hotfix0/bin/flink]]
    ```

    A：该作业使用的引擎不存在。进入**版本管理** \> **已安装版本**查看是否存在该版本引擎：

    -   不存在：请切换或安装此版本引擎。
    -   存在：请[提交工单](https://account.alibabacloud.com/login/login.htm?oauth_callback=https%3A//ticket-intl.console.aliyun.com/%23)。

